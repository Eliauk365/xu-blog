---
title: "使用IPV6解锁奈非等流媒体"
date: 2023-06-15T16:19:12+08:00
draft: true
description: 
tags: [IPV6,DNS,Unlock]
categories: [技术教程]
---

# 前言

总会遇到这么一种情况：你手里有台只有 IPV4 的服务器器，称作为 A 服务器，不解锁任何的流媒体，还有另外一台只有 IPV6 的服务器，称作为 B 服务器，而且解锁流媒体，你想要在 A 的服务器上解锁流媒体，这个时候有两种办法，一种是在 B 服务器上搭建代理，作为 A 服务器的二级代理，另一种就是把 B 服务器作为 A 的 DNS 服务器，通过 DNS 劫持的方式，使 A 服务器解锁流媒体。

## 什么是流媒体

流媒体（Streaming Media）是一种通过网络传输的多媒体技术，它允许用户在下载过程中实时观看或听取音频和视频内容。与传统的逐个下载文件的方式不同，流媒体的设计目标是在用户设备上及时播放媒体内容，而无需等待整个文件下载完成。

流媒体技术有多种类型，包括：

- 直播流媒体（Live Streaming）：用户可以实时观看正在进行的活动，如体育赛事、演唱会或新闻直播等。
- 点播流媒体（Video on Demand, VOD）：用户可以随时选择并观看存储在服务器上的视频内容，如电影、电视剧或教育视频等。

流媒体服务在互联网上非常流行，许多著名的在线平台都提供流媒体内容，如 YouTube、Netflix、Twitch 和 Spotify 等。

## 什么是 IPV6、IPV4

IPv4（Internet Protocol version 4）和IPv6（Internet Protocol version 6）是网络协议中的两种不同版本。

IPv4是互联网使用最广泛的协议版本。它使用32位地址，通常以点分十进制表示，例如，192.168.0.1。IPv4地址空间有限，只能分配大约42亿个唯一的IP地址，这在现代互联网上已经成为瓶颈。

IPv6是IPv4的继任者，采用了128位地址，通常以冒号分隔的16进制表示，例如，2001:0db8:85a3:0000:0000:8a2e:0370:7334。IPv6地址空间是IPv4地址空间的数量级，使得可以分配大量的唯一IP地址，从而支持更多的设备和更多的网络连接。

IPv6的引入是为了解决IPv4地址短缺的问题，并提供更好的安全性、可扩展性和性能。然而，由于IPv6的普及需要全球性的网络基础设施和全球大规模的协调，因此IPv4仍然是互联网中最常用的协议版本之一。

## 解锁流媒体和IP地址有什么关系

流媒体服务通常会根据用户的IP地址来确定他们的地理位置，然后根据该地理位置来限制用户访问特定的内容，这被称为地理限制或地理屏蔽。

例如，如果您在中国，访问许多流媒体服务（如Netflix、Hulu、BBC iPlayer等）通常会受到限制，因为这些服务只在特定的国家或地区提供服务。这些服务会检测您的IP地址，如果您的IP地址与其服务地区不匹配，就会拒绝您的访问。

为了解锁这些地理限制，用户通常会使用虚拟私人网络（VPN）或代理服务器来伪造自己的IP地址，使其看起来像是来自服务所在的国家或地区。这样，流媒体服务就会认为用户在其服务地区，从而解锁其限制的内容。

# 基于二级代理解锁流媒体

## 什么是二级代理

二级代理是一种代理服务器的层次结构，其中一个代理服务器（通常称为父代理服务器）向另一个代理服务器（通常称为子代理服务器）提供代理服务。

在这种结构中，客户端设备首先向子代理服务器发出请求。如果子代理服务器无法满足请求，它会将请求转发到父代理服务器。父代理服务器会继续向上级代理服务器发送请求，直到找到能够响应请求的服务器。响应结果将按相反的顺序通过代理服务器链返回到客户端设备。

二级代理可以提高代理服务器的性能和可靠性。使用多个代理服务器可以分担服务器的负载，减少请求的响应时间，同时增加代理服务器的冗余性，以便在一个代理服务器失效时，其他代理服务器可以继续提供服务。

## 在IPV6服务器上搭建代理服务

这里推荐搭建 Shadowsocks 代理服务,主要是因为适用性广，由于Shadowsocks使用Socks5代理协议，因此它可以被几乎所有的操作系统和设备所支持，包括Windows、Linux、iOS和Android等。

### 安装 Shadowsocks

本次文章仅提供一键脚本的方式搭建 Shadowscoks 服务，如果你想要了解使用 Docker 的搭建方式，可以参考 [基于Docker搭建shadowsocks](https://www.kexsw.top/index.php/archives/13)

```bash

wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh && chmod +x shadowsocks-all.sh && ./shadowsocks-all.sh 2>&1 | tee shadowsocks-all.log

# 建议使用 Shadowsocks-Rust
```

## 在IPV4服务器上搭建代理服务

这里推荐使用 x-ui 的方式搭建代理服务，因为它提供了一个直观的Web界面，可以轻松地配置和管理代理服务器，并且不需要使用命令行工具，适合不熟悉命令行的用户使用。

### 安装 x-ui

```bash
# 这里推荐使用魔改版的 x-ui，它支持最新的代理协议，比如 Reality 等。

bash <(curl -Ls https://raw.githubusercontent.com/FranzKafkaYu/x-ui/master/install.sh)
```

## 配置二级代理

复制刚刚在 IPV6 服务器搭建好的代理服务器的配置信息，然后在复制 x-ui 的配置页面中的信息，如下文所示：

```text




